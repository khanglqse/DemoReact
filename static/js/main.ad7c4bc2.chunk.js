(this.webpackJsonpkhang=this.webpackJsonpkhang||[]).push([[0],{56:function(e,t,n){e.exports=n(88)},61:function(e,t,n){},62:function(e,t,n){},79:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(26),r=n.n(o),c=(n(61),n(62),n(11)),l=n(5),s=n(12),u=n(13),d=n(14),m=n(47),p=n.n(m),h=n(4),f=(n(79),n(100)),v=n(101),b=n(102),g=n(103),O="ADD_ITEM",y="TOGGLE_FAVORITE",E="EDIT_ITEM",j="DELETE_ITEM";var w=n(19),k=n(27),C=n(28);function N(){var e=Object(k.a)(["\nwidth: 100vw;\nheight: 100vh;\nz-index: 0;\nbackground: rgba(0, 0, 0, 0.5);"]);return N=function(){return e},e}function x(){var e=Object(k.a)(["\nposition: absolute;\nleft: 0;\nright: 0;\nwidth: ","\noverflow:hidden;\npadding:16px;\nmargin: 50px auto;\nbox-sizing:border-box;\nz-index:1;\nbox-shadow: 0px 4px 8px rgba(0, 0, 0, 0.04);\nbackground:white;\nborder: 0.5px solid #E8E8E8;\n"]);return x=function(){return e},e}function D(){var e=Object(k.a)(["\nposition: fixed;\ntop: 0;\nleft: 0;\nbottom: 0;\nz-index: 1050;\ndisplay: flex;\nalign-items: baseline;\n"]);return D=function(){return e},e}var S=C.a.div(D()),I=C.a.div(x(),(function(e){return e.width||"32%"})),F=C.a.div(N()),_=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,n=e.dismiss,a=e.children,o=e.client;return i.a.createElement(i.a.Fragment,null,t?i.a.createElement(S,null,i.a.createElement(I,{width:o},a," "),i.a.createElement(F,{onClick:n})):null)}}]),t}(a.Component),P=n(15),T=n(98),A=n(99);n(84);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var R=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleDismiss=n.handleDismiss.bind(Object(h.a)(n)),n.handleInputChange=n.handleInputChange.bind(Object(h.a)(n)),n.onSave=n.onSave.bind(Object(h.a)(n)),n.state={title:n.props.item.data[0].title,description:n.props.item.data[0].description,media_type:n.props.item.data[0].media_type,href:n.props.item.links[0].href},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){this.props.item;return i.a.createElement("div",null,i.a.createElement("div",{className:"dialog-header"},i.a.createElement("span",null,"Edit"),i.a.createElement("button",null,i.a.createElement(T.a,{onClick:this.props.dismiss}))),i.a.createElement("div",{className:"box-info"},i.a.createElement("div",{className:"title"},"Title"),i.a.createElement("input",{onChange:this.handleInputChange,name:"title",type:"text",value:this.state.title})),i.a.createElement("div",{className:"box-info"},i.a.createElement("div",{className:"title"},"Description"),i.a.createElement("textarea",{onChange:this.handleInputChange,name:"description",type:"text",value:this.state.description})),i.a.createElement("div",{className:"box-info"},i.a.createElement("div",{className:"title"},"Type"),i.a.createElement("input",{onChange:this.handleInputChange,name:"media_type",type:"text",value:this.state.media_type})),i.a.createElement("div",{className:"box-info"},i.a.createElement("div",{className:"title"},"Link preview image Url"),i.a.createElement("input",{onChange:this.handleInputChange,name:"href",type:"text",value:this.state.href})),i.a.createElement("button",{className:"dialog-action",onClick:this.onSave},i.a.createElement(A.a,null),"Save"))}},{key:"handleInputChange",value:function(e){var t=e.target,n=t.value,a=t.name;this.setState(Object(P.a)({},a,n))}},{key:"onSave",value:function(e){this.props.editItem(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(n,!0).forEach((function(t){Object(P.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.state,{nasa_id:this.props.item.data[0].nasa_id})),this.props.dismiss(),e.preventDefault()}},{key:"handleDismiss",value:function(){this.props.dismiss()}}]),t}(i.a.Component);var W=Object(w.b)(null,(function(e){return{editItem:function(t){return e({type:E,payload:t})}}}))(R),J=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleModalOpen=function(){n.setState({isModalOpen:!n.state.isModalOpen})},n.dismissable=function(){n.setState({isModalOpen:!1})},n.state={isModalOpen:!1,item:e.item},n.addToCollection=n.addToCollection.bind(Object(h.a)(n)),n.removeItemFromCollection=n.removeItemFromCollection.bind(Object(h.a)(n)),n.handleModalOpen=n.handleModalOpen.bind(Object(h.a)(n)),n.toggleFavorite=n.toggleFavorite.bind(Object(h.a)(n)),n.dismissable=n.dismissable.bind(Object(h.a)(n)),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({item:e.item})}},{key:"render",value:function(){var e,t=this.state.isModalOpen;console.log(this.state.item.isFavorite),t&&(e=i.a.createElement(W,{dismiss:this.dismissable,item:this.state.item}));var n=this.formatDate(this.state.item.data[0].date_created);return i.a.createElement("div",{className:"item"},i.a.createElement("img",{src:this.state.item.links[0].href}),i.a.createElement("div",{className:"item-info"},i.a.createElement("span",null,this.state.item&&this.state.item.data[0].keywords&&this.state.item.data[0].keywords.length>0?this.state.item.data[0].keywords[0]:""),i.a.createElement("span",null,n)),i.a.createElement("div",{className:"detail"},i.a.createElement("p",{className:"title"},this.state.item.data[0].title.length>100?this.state.item.data[0].title.substring(0,100)+"...":this.state.item.data[0].title),i.a.createElement("span",null,this.state.item.data[0].description.length>200?this.state.item.data[0].description.substring(0,200)+"...":this.state.item.data[0].description)),this.props.isCollection?i.a.createElement("div",{className:"action"},i.a.createElement("button",{onClick:this.toggleFavorite,className:this.state.item.isFavorite?"red":"default"},i.a.createElement(f.a,null)),i.a.createElement("button",{onClick:this.removeItemFromCollection},i.a.createElement(v.a,null)),i.a.createElement("button",{onClick:this.handleModalOpen},i.a.createElement(b.a,null))):i.a.createElement("div",{className:"action"},i.a.createElement("button",{onClick:this.addToCollection,className:"w-100"},i.a.createElement(g.a,null)," Add to NASA Collection")),i.a.createElement(_,{client:"50%",visible:t,dismiss:this.dismissable,children:e}))}},{key:"removeItemFromCollection",value:function(e){this.props.removeItem(this.props.item),e.preventDefault()}},{key:"addToCollection",value:function(e){this.props.addItem(this.props.item),e.preventDefault()}},{key:"toggleFavorite",value:function(e){this.props.toggleFavorite(this.props.item),e.preventDefault()}},{key:"formatDate",value:function(e){var t=new Date(e),n=t.getDate(),a=t.getMonth(),i=t.getFullYear();return n+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][a]+" "+i}}]),t}(i.a.Component);var L=Object(w.b)(null,(function(e){return{addItem:function(t){return e({type:O,payload:t})},toggleFavorite:function(t){return e({type:y,payload:t})},removeItem:function(t){return e({type:j,payload:t})}}}))(J),z=(n(85),n(24)),U=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).setKeyword=B((function(e){n.setState({keyword:e}),n.search(e)}),100),n.state={items:[],keyword:""},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;console.log(this);var t=this.state.items&&this.state.items.map((function(e){return i.a.createElement(L,{item:e})}));return i.a.createElement("div",{className:"search-container"},i.a.createElement(z.b,{to:"/"},i.a.createElement("p",null,"<"," Back to collection")),i.a.createElement("p",{className:"title"},"Search from Nasa"),i.a.createElement("input",{type:"text",className:"input",onChange:function(t){e.setKeyword(t.target.value)},placeholder:"Search..."}),void 0!==this.state.totalResult?i.a.createElement("p",null,this.state.totalResult," result for ",this.state.keyword):"",i.a.createElement("div",{className:"item-container"},t))}},{key:"search",value:function(e){var t=this;p.a.get("https://images-api.nasa.gov/search?q=".concat(e),{headers:{"Content-Type":"application/json"}}).then((function(e){t.setState({items:e.data.collection.items.filter((function(e){return e.links&&e.data})),totalResult:e.data.collection.metadata.total_hits})}))}}]),t}(i.a.Component),B=function(e,t){var n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];var r=this;n&&clearTimeout(n),n=setTimeout((function(){e.apply(r,i)}),t)}},V=U,G=(n(87),function(e){function t(e){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).call(this,e))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMou",value:function(){this.setState({inputValue:this.props.inputValue})}},{key:"render",value:function(){var e=this.props.collectionReducer.collection,t=(void 0===e?[]:e).map((function(e,t){return i.a.createElement(L,{item:e,key:"key-".concat(t),isFavorite:e.isFavorite,isCollection:!0})}));return i.a.createElement("div",{className:"container"},i.a.createElement("header",{className:"header"},i.a.createElement("span",null,"NASA Collection"),i.a.createElement(z.b,{to:"/search"},i.a.createElement("button",null,"+ Add new item"))),i.a.createElement("div",{className:"item-container"},t))}}]),t}(i.a.Component)),K=Object(w.b)((function(e){return{collectionReducer:e.collectionReducer}}))(G),q=n(20);var Y=function(){return i.a.createElement(z.a,null,i.a.createElement("div",{className:"container"},i.a.createElement(q.c,null,i.a.createElement(q.a,{path:"/search"},i.a.createElement(V,null)),i.a.createElement(q.a,{path:"/"},i.a.createElement(K,null)))))},$=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function H(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Q=n(23),X=n(25);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(n,!0).forEach((function(t){Object(P.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te={collection:[]},ne=Object(Q.b)({collectionReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:if(e.collection.find((function(e){return e.data[0].nasa_id==t.payload.data[0].nasa_id})))return alert("This item is already in collection"),e;var n=e.collection,a=void 0===n?[]:n;return a.push(t.payload),ee({},e,{},{collection:a});case j:return Object.assign({},e,{collection:Object(X.a)(e.collection.filter((function(e){return e.data[0].nasa_id!==t.payload.data[0].nasa_id})))});case E:var i=e.collection.find((function(e){return e.data[0].nasa_id==t.payload.nasa_id}));Object.assign(i.data[0],t.payload),i.links[0].href=t.payload.href;var o=e.collection.indexOf(i);return Object.assign({},e,{collection:[].concat(Object(X.a)(e.collection.slice(0,o)),[i],Object(X.a)(e.collection.slice(o+1)))});case y:var r=e.collection.find((function(e){return e.data[0].nasa_id==t.payload.data[0].nasa_id})),c=e.collection.indexOf(r);return Object.assign({},e,{collection:[].concat(Object(X.a)(e.collection.slice(0,c)),[Object.assign(r,{isFavorite:!r.isFavorite})],Object(X.a)(e.collection.slice(c+1)))});default:return e}}}),ae=Object(Q.c)(ne);r.a.render(i.a.createElement(w.a,{store:ae},i.a.createElement(Y,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");$?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):H(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):H(t,e)}))}}()}},[[56,1,2]]]);
//# sourceMappingURL=main.ad7c4bc2.chunk.js.map